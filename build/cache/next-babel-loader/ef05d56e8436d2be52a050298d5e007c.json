{"ast":null,"code":"// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nconst AirtableAPI = {\n  apiKey: \"keym6ehWNZnQzpS4m\",\n  base: \"\",\n  url: \"https://api.airtable.com/v0/\",\n  init: function ({\n    apiKey,\n    base\n  }) {\n    this.apiKey = apiKey;\n    this.base = base; //const records = await this.fetch(\"Link\");\n\n    return this;\n  },\n  fetch: async function (table) {\n    if (this.apiKey && this.base && table) {\n      const endpoint = `${this.url}${this.base}/${table}?api_key=${this.apiKey}`; //console.log(endpoint);\n\n      const res = await fetch(endpoint, {});\n      const rj = await res.json(); //console.log(\"response\", rj);\n\n      return rj.records;\n    } else return null;\n  }\n};\n\nasync function fetcher() {\n  AirtableAPI.init({\n    apiKey: \"keym6ehWNZnQzpS4m\",\n    base: \"appq9CwhpYOjOv4tQ\"\n  });\n  const tagdata = await AirtableAPI.fetch(\"Tag\");\n  const categorydata = await AirtableAPI.fetch(\"Category\");\n  const linkdata = await AirtableAPI.fetch(\"Link\"); //console.log(\"props\", tagdata, categorydata, linkdata)\n\n  return {\n    linkdata,\n    tagdata,\n    categorydata\n  };\n}\n\nasync function Airdata(req, res) {\n  return await fetcher();\n}\n\nexport default Airdata;","map":null,"metadata":{},"sourceType":"module"}